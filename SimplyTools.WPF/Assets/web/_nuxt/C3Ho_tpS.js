import{c as E}from"./DmueuAKG.js";import{r as q,s as V,j as v,k as p,l as C,c as O,o as k,m as D,n as S,p as M,e as T,q as B,v as N,g as b,w as _,a as x,b as L,d as g,h as R}from"./CfbvuZjT.js";import{u as U,a as W}from"./CUNkdK4U.js";import{_ as $}from"./gQrGCUfV.js";import{u as P,U as j}from"./DGNIRpLh.js";import"./BAYpYBTo.js";import"./DlAUqK2U.js";import"./CQCgYrss.js";const z={__name:"MonacoDiffEditor",props:{lang:{type:String,required:!1,default:()=>"plaintext"},options:{type:null,required:!1,default:()=>({})},originalModelUri:{type:null,required:!1},modelUri:{type:null,required:!1},original:{type:String,required:!1,default:()=>""},modelValue:{type:String,required:!1,default:()=>""}},emits:["update:modelValue","load"],async setup(h,{expose:u,emit:f}){let l,s;const e=h,o=f,r=q(!0),n=V(),w=V(),y={automaticLayout:!0};u({$editor:w});const d=([l,s]=v(()=>U()),l=await l,s(),l);let i,t,a;return p(()=>[e.original,e.modelValue],()=>{(t.getValue()!==e.original||a.getValue()!==e.modelValue)&&(t.setValue(e.original),a.setValue(e.modelValue))}),p(()=>e.lang,()=>{const m=t?.getValue()||e.original,c=a?.getValue()||e.modelValue;t&&t.dispose(),a&&a.dispose(),t=d.editor.createModel(m,e.lang,e.originalModelUri),a=d.editor.createModel(c,e.lang,e.modelUri),i.setModel({original:t,modified:a})}),p(()=>e.options,()=>{i?.updateOptions(M(e.options,y))}),p(n,(m,c)=>{!n.value||c||(i=d.editor.createDiffEditor(n.value,M(e.options,y)),w.value=i,t=d.editor.createModel(e.original,e.lang,e.originalModelUri),a=d.editor.createModel(e.modelValue,e.lang,e.modelUri),i.setModel({original:t,modified:a}),i.onDidUpdateDiff(()=>{o("update:modelValue",i.getModel().modified.getValue())}),r.value=!1,o("load",i))}),C(()=>{i?.dispose(),t?.dispose(),a?.dispose()}),(m,c)=>(k(),O("div",{ref_key:"editorElement",ref:n},[r.value?D(m.$slots,"default",{key:0}):S("",!0)],512))}},A=E(z),Y=T({__name:"diff",async setup(h){let u,f;P(j.pages.find(e=>e.path==="diff")),[u,f]=v(()=>W()),await u,f();async function l(e){s="simplytools-"+e,(await U()).editor.setTheme("simplytools-"+e)}let s="simplytools-dark";if(window?.matchMedia){let e=function(r){l(r.matches?"dark":"light")};const o=window.matchMedia("(prefers-color-scheme: dark)");l(o.matches?"dark":"light"),B(()=>{o.addEventListener("change",e)}),N(()=>{o.removeEventListener("change",e)})}return(e,o)=>{const r=A,n=$;return k(),b(n,{category:"none",tool:"Text Compare",class:"flex flex-col h-full"},{summary:_(()=>o[0]||(o[0]=[g(" Easily compare between two pieces of text! ",-1)])),details:_(()=>o[1]||(o[1]=[g(" Powerful difference checker running in your device. Just paste down two pieces of text in each side, and the differences among them will show up! ",-1)])),default:_(()=>[o[2]||(o[2]=x("div",{class:"flex p-4"},[g(" Old Text goes to the left! "),x("div",{class:"grow"}),g(" New Text goes to the right! ")],-1)),L(r,{ref:"editor",options:{originalEditable:!0,readOnly:!1,theme:R(s),diffWordWrap:"on",renderOverviewRuler:!1},class:"w-full grow bg-control-primary"},null,8,["options"])]),_:1,__:[2]})}}});export{Y as default};
